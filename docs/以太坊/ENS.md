# ENS

<https://app.ens.domains/>
- 搜索域名或地址
	- 不可以搜索子域名、不能搜索其他链的地址
- 获取钱包实例
- 域名解析和反解析
- 我的域名展示
- 反向解析绑定
	- 注册后，再绑定，其他dapp中才会显示域名
- 域名转让
- 设置管理员
- 域名到期提醒
- 设置解析器
- 添加内容、文本记录、其他链的地址
- 添加子域名
- 注册域名
	- 发交易请求注册
	- 等待一分钟
	- 发交易完成注册

## 1. ENS的两个主要组件

1. 注册器：该合约维护所有域名和子域名列表，并存储关于每个域名的三个关键信息:	域名的所有者、域名的解析器、域名下所有记录的缓存存活时间（即TTL）。域名的所有者可以是地址或智能合约地址。？不知道智能合约地址怎么操作域名？注册器的域名为 eth，其他地址注册域名时，相当于将注册器的子域名分发给其他地址。可以为自己的域名设置注册表？

2. 解析器：负责将域名转换为地址。默认的解析器智能解析以太坊地址，[自定义解析器可以解析其他链](https://eips.ethereum.org/EIPS/eip-2304)。过程：找到域名对应的解析器，将域名传入解析器，返回结果。

- 域名就是个 nft
- 域名到期后，有90天的宽限期，宽续期内还能续费，之后别人可以注册这个域名。

	> 5 个字符及以上的 .eth 域名：每年 5 美元的以太币  
	> 4 个字符的 .eth 域名：每年 160 美元的以太币  
	> 3 个字符的 .eth 域名：每年 640 美元的以太币

## 2. Namehash
- 使用 Namehash 是为了不在智能合约中处理文本字符串
- 使用 UTS-46 对域名规范化，再递归哈希处理得到 Namehash，在 ENS 内部使用 Namehash 表示域名
- node/节点表示的也是 Namehash

## 3. ENS 根节点
- 根节点（其实就是维护域名列表的注册器）由一个多签智能合约控制，用于实施域名管理方面的变更，但不能控制.eth域名
