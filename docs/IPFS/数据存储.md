# 数据存储

[参考文档 2018-7-17](https://cloud.tencent.com/developer/news/277198)

- IPFS 不仅可以存储文件，任意类型的数据都能存储。

- IPFS 会将文件拆分成很多个数据块，每个数据块在 256kb 内，再把这些数据块转换成 Merkle DAG 格式，并获得 CIDs
  - 拆分成数据块的好处：文件修改后再上传，只需要上传几个修改过的数据块
- 数据会被保存到本地的 blockstore 中。但是需要注意的是，数据并不会立刻主动上传到 IPFS 网络中，也就是与其连接的 peers 节点中。除非，某 peer 节点曾经请求过该数据。
- IPFS 网关（ipfs.io）实际上扮演的是一个 IPFS 节点的作用。只要打开 IPFS 网关，就能访问到 IPFS 网络中的数据。一旦 IPFS 网关第一次缓存节点数据之后，再次请求时，它就无需再向原节点请求数据了，只要 Hash 值没有变化，就可以直接把之前缓存的数据返回给浏览器。
- 实际上，Peer 节点在执行 add 命令时，还会广播自己拥有的块信息，同时，它还会维护一个该网络中所有已发给当前节点的 block 请求列表，一旦 add 命令都添加的数据满足请求列表，就会向对应节点主动发送数据，并更新该列表。
